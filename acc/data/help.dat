IMAGE_URL
イメージディレクトリの URL

解析画面で表示するために必要な画像や円グラフに使う Flash SWF ファイル、Java アプレットなどを格納するディレクトリ（フォルダ）の URL の指定です。<br>
<br>
もし、HTML ファイルも CGI ファイルも、どこにおいてもよいサーバをお使いの場合には、同梱されているディレクトリ「images」を、CGI ディレクトリ「acc」の配下にアップロードしてください。そして、<tt>./images</tt> と設定して下さい。<br>
<br>
しかし、CGI ファイルを「cgi-bin」など指定のディレクトリに設置しなければいけないサーバをご利用の場合には、ディレクトリ「images」は、CGI ファイルとは別に、通常の HTML ファイルを設置する場所にアップロードする必要があります。その場合には、ディレクトリ「images」をアップロードする予定の場所の URL を指定してください。ただし、最後に「<tt>/</tt>（スラッシュ）」を入れないようにして下さい。<br>
<br>
【設定例】 <tt>http://www.hoge.ne.jp/foo/images</tt><br>


<-- delimiter -->
AUTHFLAG
アクセス制限機能
「acc.cgi」にアクセスしたときに、パスワード認証をさせるかどうかを定義します。アクセス制限機能を「する」に設定すると、解析結果を見る際に、パスワードを要求してくるようになります。「する」と設定した場合には、次の設定項目「パスワード」の欄で、パスワードを設定して下さい。<br>
<br>
あなたのホームページのアクセス解析の結果は、管理者であるあなたが見て分析するものです。解析結果が一般に公開されてしまうということは、あなたのホームページを訪れる方にとっては、気持ちがいいものではありません。出来る限り、この機能は、「する」にしておきましょう。



<-- delimiter -->
PASSWORD
パスワード
「acc.cgi」にアクセスしたときのアクセス制限のパスワード認証に使うパスワードの設定です。デフォルトでは「<tt>password</tt>」と設定されています。必ず、変更してください。


<-- delimiter -->
URL2PATH_FLAG
URL マッピング機能
高機能アクセス解析 CGI は、アクセスページの解析において、対象ページのタイトルを取得し、解析結果に表示する機能を持っています。通常、URL から、自動的に HTML ファイルの位置を検出するのですが、URL に「~（チルダ）」が含まれている場合や、一部のサーバ環境では自動的に取得できません。この場合には、ページの URL と、CGI ファイルから見た HTML ファイルへの相対パスを定義する必要があります。<br>
<br>
もしアクセスページの解析で、対象ページのタイトルが検出されない場合には、ここの設定を「する」にして下さい。そして、次の URL マッピングの設定で、サーバ環境にあわせてマッピングを定義して下さい。<br>
<br>
ただ、解析したいページが設置されてるサーバと、この CGI が設置されているサーバが異なる場合には、ページタイトルの取得はできませんので、ご注意ください。

<-- delimiter -->
URL2PATH
URL マッピング
URL 欄には、あなたのサイトのトップページとなる URL を指定して下さい。ただし、index.html などのファイル名は指定せず、最後に「<tt>/</tt>（スラッシュ）」を必ず入れてください。<br>
<br>
【設定例】 <tt>http://www.futomi.com/</tt><br>
<br>
パス欄には、URL 欄で指定した URL のパスを指定します。サーバのルートからのパス（絶対パス）でも、<tt>acc.cgi</tt> から見た相対パスのどちらでも結構です。ただし、最後にファイル名や「<tt>/</tt>（スラッシュ）」は入れないで下さい。絶対パスが分からない場合には、お使いのサーバのサービス事業者にお問合せください。<br>
<br>
【設定例１】 <tt>/home/futomi/</tt><br>
【設定例２】 <tt>../../futomi/</tt><br>
<br>
もし、URL 欄に <tt>http://www.futomi.com/</tt> を、パス欄に <tt>../../futomi/</tt> と設定したとします。アクセスされたページの URL が <tt>http://www.futomi.com/library/acc.html</tt> だとすると、アクセス解析 CGI は、<tt>../../futomi/library/acc.html</tt> に HTML ファイルが存在すると認識し、ページタイトルを取得しにいこうとします。


<-- delimiter -->
TIMEDIFF
時差の調整
海外のサーバをご利用の方で、サーバの時間が現地時間の場合には、CGI の設定で調整することができます。単位は、時間（hour）です。国内のサーバを利用の場合には、何も設定しないで下さい。<br>


<-- delimiter -->
GRAPHMAXLENGTH
棒グラフの長さ
解析結果で、横棒グラフで表示される項目があります。100% の横棒の長さをピクセルで指定することができます。デフォルトでは 300 ピクセルですが、もっと長くしたいもしくはもっと短くしたい場合には、ここの設定を変更して下さい。


<-- delimiter -->
ROW
表示ランキング数
解析結果は、アクセス数が多い順に表示されます。デフォルトでは、20 位まで表示されますが、表示数を増やしたい場合には、ここの設定を多くしてください。ただし大きすぎると、解析処理が重くなりますのでご注意ください。



<-- delimiter -->
LOTATION
ログローテーション設定
アクセスログは、ページアクセスがあるたびに、どんどん大きくなっていきます。しかし、大きくなりすぎると解析できなくなるだけでなくサーバ負荷も大きくなり、場合によっては、アクセスログが壊れてしまう可能性も大きくなってきます。 そこで、アクセスログがある程度の大きさになったら、別名に保存しておかなければいけません。このことを、ログローテーションと呼びます。ここでは、ログローテーションのルールを定義します。あなたのサイトの状況に合わせて、適切な設定をして下さい。<br>
<br>
「しない」にすると、CGIのレスポンスが非常に悪くなると同時に、プロバイダーでご契約の容量を圧迫してしまいます。従って、必ず定期的なログローテーションを設定するようにして下さい。<br>
<br>
解析処理は、概ねログサイズが 1 MB で限界に達します。従って、ローテーションのタイミングは、ログサイズが 1 MB を超えないあたりに設定するのが望ましい設定です。初めてご利用になる場合には、何日か様子を見たうえで、決定してください。

      <p>ログファイルは、ディレクトリ（フォルダ）「logs」内に自動生成されます。ログファイル名の命名規則は次の通りです。</p>
      <table border="1" cellspacing="0" cellpadding="3">
        <tr>
          <td nowrap bgcolor="#666699"><font color="#FFFFFF">設定</font></td>
          <td nowrap bgcolor="#666699"><font color="#FFFFFF">ログファイル名</font></td>
          <td nowrap bgcolor="#666699"><font color="#FFFFFF">備考</font></td>
        </tr>
        <tr>
          <td nowrap bgcolor="#FFFFCC">ローテーションしない</td>
          <td nowrap bgcolor="#FFFFCC"><tt>access_log.cgi</tt></td>
          <td bgcolor="#FFFFCC">　</td>
        </tr>
        <tr>
          <td nowrap bgcolor="#FFFFCC">ログサイズでローテーション</td>
          <td nowrap bgcolor="#FFFFCC"><tt>access_log.cgi</tt></td>
          <td bgcolor="#FFFFCC">ローテーションされると過去ログは、<tt>access_log.<i>YYYYMMDD</i>.cgi</tt> 
            にリネームされます。</td> 
        </tr>
        <tr>
          <td nowrap bgcolor="#FFFFCC">日ごとにローテーション</td>
          <td nowrap bgcolor="#FFFFCC"><tt>access_log.<i>YYYYMMDD</i>.cgi</tt></td>
          <td bgcolor="#FFFFCC">　</td>
        </tr>
        <tr>
          <td nowrap bgcolor="#FFFFCC">月ごとにローテーション</td>
          <td nowrap bgcolor="#FFFFCC"><tt>access_log.<i>YYYYMM00</i>.cgi</tt></td>
          <td bgcolor="#FFFFCC">　</td>
        </tr>
        <tr>
          <td nowrap bgcolor="#FFFFCC">週ごとにローテーション</td>
          <td nowrap bgcolor="#FFFFCC"><tt>access_log.<i>YYYYMMDD</i>.cgi</tt></td>
          <td bgcolor="#FFFFCC"><tt><i>YYYYMMDD</i></tt> 
            は、週の初めの日曜日の日付となります。</td> 
        </tr>
      </table>
      <p>※ <tt><i>YYYYMMDD</i></tt> は日付をあらわします。<tt><i>YYYY</i></tt> は西暦、<tt><i>MM</i></tt> 
      は月（01 〜 12）、<tt><i>DD</i></tt> は日（01 〜 31）となります。</p>



<-- delimiter -->
LOTATION_SIZE
ローテーションサイズ
ログローテーションの設定で、「ログサイズでローテーション」と設定された場合には、ローテーションサイズを設定する必要があります。単位は バイト です。アクセスログが、指定のファイルサイズをこえた時に、現在のログをローテーションします。デフォルトでは 1000000 バイト（約 1 MB）となっておりますが、これより大きい設定は、解析処理の限界を超える可能性が高くなりますので、お勧めできません。変更する場合には、デフォルトより小さい値に設定するようにして下さい。


<-- delimiter -->
LOTATION_SAVE
過去ログ保存
ログローテーションされると過去のログは別名で保存されますが、ここではその過去ログを保存するか削除してしまうかを指定します。保存しておく場合には、こまめにサーバからダウンロードしておいて、サーバ上のログファイルを削除するようにして下さい。ほったらかしにすると、あっという間にサーバの契約容量に達してしまいますので、ご注意ください。<br>
<br>
「保存する」設定にしておいて、サーバ上に複数の過去ログファイルがあったとします。途中で「削除する」の設定に変更すると、すべての過去ログが削除されてしまいますので、ご注意ください。 


<-- delimiter -->
MY_SITE_URLs
リンク元解析 除外 URL
自サイト内で複数ページアクセスすると、リンク元サイト、リンク元 URL の解析では、自サイトが検出されてしまいます。本来、この解析は、他サイトからのアクセスを解析する目的ですので、自サイトの検出されるのは好ましくありません。<br>
ここでは、リンク元解析におてい除外するサイトの URL を指定することができます。主に、自サイトの URL を指定してください。ただ、他サイトでも検出したくないサイトがあれば、複数設定することも可能です。<br>
<br>
【設定例】 <tt>http://www.futomi.com</tt><br>
<br>
ここでの設定は前方一致です。上記設定例では、<tt>http://www.futomi.com</tt> 配下の URL はすべてリンク元解析対象から除外されます。<br>
<br>
複数設定する場合には、改行を入れて指定して下さい。<br>
<br>
【設定例】<br>
<tt>http://www.futomi.com</tt><br>
<tt>http://futomi.com</tt><br>


<-- delimiter -->
REJECT_HOSTS
ロギング除外ホスト
アクセス元ホスト名、もしくは IP アドレスを指定することで、該当のアクセスのログを出力しないようにすることができます。CATV など、自分の IP アドレスが固定である場合に、便利です。<br>
ここの設定は、解析対象から外すのではなく、ログを出力しないようにしてしまいます。ここで指定した ホスト名もしくは IP アドレスからのアクセスは、一切記録されませんので、ご注意ください。<br>
<br>
ホスト名で指定した場合、後方一致ですのでドメインごと対象外にすることも可能です。IP アドレスでの指定の場合には、逆に前方一致となります。

たとえば、<tt>hoge.com</tt> と指定した場合、ドメイン <tt>hoge.com</tt> からのアクセスに対して、ログを生成しなくなります。


<-- delimiter -->
DIRECTORYINDEX
ディレクトリインデックス
ほとんどのサーバでは、たとえば、http://www.futomi.com/ にアクセスすると、http://www.futomi.com/index.html が表示されますね。これは、サーバ側で、ディレクトリに対してアクセスがあった場合には、そのディレクトリ内の指定のファイルにアクセスするよう設定されているのです。おおむね、指定ファイルとして、「index.html」「index.htm」が定義されています。<br>
<br>
アクセス解析 CGI では、アクセスページは、ブラウザーで指定された URL をそのまま記録します。つまり、http://www.futomi.com/ のように、ファイル名が指定されていない URL として記録されることがあります。このままでは、CGI 側でファイル名を特定できず、ページタイトルを取得することができません。<br>
<br>
そこで、CGI の設定に、ディレクトリインデックスを定義できるようにしてあります。デフォルトでは、<tt>index.html</tt> と <tt>index.htm</tt> が定義されています。もし、<tt>http://www.futomi.com/</tt> でアクセスがあった場合には、まず index.html を探し、もしなければ <tt>index.htm</tt> を探します。もし存在すれば、アクセスページ解析において、ページタイトルが表示されるようになります。ここで指定した順番どおりに検索しますので、指定する順番には注意してください。<br>
<br>
もし、トップページで SSI を使っており、たとえば、http://www.futomi.com/ にアクセスすると、http://www.futomi.com/index.shtml を表示するようになっているのであれば、ディレクトリインデックスの指定に、<tt>index.shtml</tt> を付け加えてください。

<-- delimiter -->
URLHANDLE
アクセスページ URL の扱い
<p>アクセスページ分析において、アクセスページの URL に引数がつく場合、その引数を無視するかどうかを定義します。
主に、PHP を使って動的に内容を生成し出力されるページや、掲示板等のCGIが出力するページを解析する場合に使います。
例えば、</p>
<ul>
  <li><tt>http://www.futomi.com/cgi-bin/hoge.cgi<font color="#FF0000">?key=value1</font></tt></li>
  <li><tt>http://www.futomi.com/cgi-bin/hoge.cgi<font color="#FF0000">?key=value1</font></tt></li>
</ul>
は、通常、別々のページとして解析されますが、「? 以降は無視する」を選択すると、どちらも、
<ul>
  <li><tt>http://www.futomi.com/cgi-bin/hoge.cgi</tt></li>
</ul>
<p>として解析されます。ご覧の通り、? 以降が無視されて解析されます。
尚、「? 以降は無視する」を選択したとしても、ログには、フル URL で記録されます。
あくまでも解析時においてのみ、? 以降を無視します。</p>

<-- delimiter -->
USECOOKIE
Cookie 利用設定
ユニークユーザ数（訪問者数）を把握するために、高機能アクセス解析 CGI は、Cookie を使っています。サイトにアクセスしたブラウザーに、CGI が自動生成した識別 ID を含んだ Cookie を仕込みます。次回、同じブラウザーからアクセスがあると、CGI は、そのブラウザーの識別 ID を読み取り、同じ人がアクセスしたと判断します。<br>
<br>
ここでは、Cookie を使うか使わないかを設定します。基本的には、「使う」にして下さい。 「使わない」にすると、ユニークユーザ数が正しく解析できません。


<-- delimiter -->
EXPIREDAYS
Cookie 有効期限
Cookie の有効期限の設定です。日で指定してください。デフォルトは、30日（一ヶ月程）としています。ここで指定した日数を過ぎると、訪問者のブラウザーに仕込まれた Cookie は無効になります。したがって、指定日を過ぎてその人がアクセスすると、別人とみなします。<br>
<br>
Cookie は、アクセスがあるたびにブラウザーに仕込みます。しかし、過去にアクセスがあった場合には、Cookie の有効期限のみを更新します。識別 ID は更新しません。したがって、最後のアクセスから指定日を過ぎると、別人とみなします。<br>
<br>
Cookie の有効期限は、あなたのユニークユーザというものの考え方で変わってきます。もし、ユニークユーザを何度もアクセスしに来る常連さんと考えるのであれば、短くするべきです。逆に、過去に一度でもアクセスがあり、ほとんど訪問してくれない方もユニークユーザと考えるのであれば、非常に大きな値を設定すべきです。


<-- delimiter -->
INTERVAL
セッションインターバル
セッション数（訪問数）は、IP アドレス（アクセス元ホスト名）とアクセス日時を元に解析されます。同じ IP アドレスから何度かアクセスがあれば、それは 1 セッションとみなすわけですが、ある一定時間を越えてアクセスがあった場合には、それは別セッションとみなします。ここでは、その別セッションとみなすアクセス時間間隔のしきい値を秒で指定します。
デフォルトでは、1800秒（30分）です。1800秒間、アクセスが無く、その後アクセスがあれば、それを別セッション（訪問）とみなします。


<-- delimiter -->
LOCK_FLAG
ログファイルのロック処理
ログファイルのロック処理は、Perl の flock 関数を使います。通常は「する」に設定して下さい。ただ、Windows 系サーバでは、flock 関数が使えない場合があります。その場合には、「しない」に設定して下さい。


<-- delimiter -->
CIRCLE_GLAPH
円グラフの方式
円グラフを表現するために、高機能アクセス解析 CGI は、Flash と Java アプレットを採用しています。ご利用のブラウザー環境に合わせて選択して下さい。<br>
<br>
ブラウザーに表示する際は、Flash の方が早く表示されます。特に Windows XP をお使いの場合や、それ以外の Windows で Netscape をお使いの場合、Java アプレットを選択していると、円グラフが呼び出された時点で Java VM が起動しますので、その分、表示が遅く感じられます。


<-- delimiter -->
IMAGE_TYPE
解析タグの表示画像形式
各 HTML に仕込んでいただいた 解析タグ部分に表示させる 1 x 1 ピクセルの画像ファイルのファイル形式を選択して下さい。<br>
通常、「自動認識」でいいのですが、あえてファイル形式を固定したい場合には、選択して下さい。<br>
「自動認識」の場合、以下のルールが適用されます。<br>
<ul>
  <li>au端末の場合：JPEG</li>
  <li>J-PHONE端末の場合：PNG</li>
  <li>その他：GIF</li>
</ul>

